<div class="container-fluid page">
  <div id="time_header" class="d-flex page__box p-3 mt-2">Create a Set</div>
  <div class="page__content shadow p-3 position-relative">
    <div class="page__content-data">

      <button id="addeditcards" class="btn btn-lg btn-outline-primary"
        (click)="openCards(contentCard, card, 'lg')" style="float:left;">
            Add/Edit Cards
      </button>
      <button id="addedittags" class="btn btn-lg btn-outline-primary"
        (click)="openTags(contentTag, 'lg')" style="float:left;">
            Add/Edit Tags
      </button>
      <button id="create-button" class="btn btn-lg btn-outline-primary"
        (click)="createDeck()" style=float:left;>
            Create Deck
      </button>

      <ngb-toast id="toastMessage" *ngIf="deckMessage" [autohide]="true" [delay]="3000" (hidden)="deckMessage=false">
          <b>Created a Deck!</b>
      </ngb-toast>

        <br><br>
      <div class="form-floating mb-3">
        <input  id="decktitle" [(ngModel)]="title" type="text" class="form-control" id="floatingInputValue" placeholder="Java Basics">
          <label for="floatingInput">Deck Title</label>
      </div>
      
      <div id="cardsTable">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">Question</th>
              <th scope="col">Answer</th>
            </tr>
          </thead>

          <tbody>
            <tr class="cardValue" *ngFor="let card of dynamicArrayCard">
              <td>{{ card.question }}</td>
              <td>{{ card.answer }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <ng-template #contentCard let-modal>
        <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">Add/Edit Cards</h4>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="modal.dismiss('Cross click')"
          >
            <span aria-hidden="true"> X </span>
          </button>
        </div>
        <div class="container" style="margin-top: 5%">
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Action</th>
                <th>Question</th>
                <th>Answer</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let dynamic of dynamicArrayCard | slice: 1; let i = index"
              >
                <td (click)="deleteRowCard(i)">
                  <i class="fa fa-trash fa-2x"></i>
                </td>
                <td>
                  <input
                    id="cardquestion"
                    [(ngModel)]="dynamicArrayCard[i].question"
                    class="form-control"
                    type="text"
                  />
                </td>
                <td>
                  <input
                    id="cardanswer"
                    [(ngModel)]="dynamicArrayCard[i].answer"
                    class="form-control"
                    type="text"
                  />
                </td>
              </tr>
              <tr>
                <td id="addrowCard" (click)="addRowCard()">
                  <i class="fa fa-plus fa-2x"></i>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button
            id="savebutton"
            type="button"
            class="btn btn-outline-dark"
            (click)="modal.close('Save click')"
          >
            Save
          </button>
        </div>
      </ng-template>
      <ng-template #contentTag let-modal>
        <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">Add/Edit Tags</h4>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="modal.dismiss('Cross click')"
          >
            <span aria-hidden="true"> X </span>
          </button>
        </div>
        <div class="container" style="margin-top: 5%">
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Action</th>
                <th>Tag</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let dynamic of dynamicArrayTag| slice: 1; let i = index"
              >
                <td (click)="deleteRowTag(i)">
                  <i class="fa fa-trash fa-2x"></i>
                </td>
                <td>
                  <select id="tag" [(ngModel)]="dynamicArrayTag[i]" class="form-control">
                    <option *ngFor="let t of tags" [value] ="t.id">{{t.tag}}</option>
                  </select>
              </tr>
              <tr>
                <td id="addrowTag" (click)="addRowTag()">
                  <i class="fa fa-plus fa-2x"></i>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button
            id="savebutton"
            type="button"
            class="btn btn-outline-dark"
            (click)="modal.close('Save click')"
          >
            Save
          </button>
        </div>
      </ng-template>
    </div>
  </div>
</div>
